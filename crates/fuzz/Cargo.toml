[package]
name = "trident-fuzz"

version = { workspace = true }
edition = { workspace = true }
repository = { workspace = true }
description = { workspace = true }
license-file = { workspace = true }
readme = { workspace = true }

[lints.rust]
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(honggfuzz)', 'cfg(afl)'] }

[features]
all = ["vote", "stake", "token"]
vote = ["dep:solana-vote-program"]
stake = ["dep:solana-stake-program"]
token = ["dep:spl-token"]

# Derive macros
[dependencies.trident-derive-transaction]
path = "../fuzz/derive/transaction"
version = "0.10.0"

[dependencies.trident-derive-instruction]
path = "../fuzz/derive/instruction"
version = "0.10.0"

[dependencies.trident-derive-accounts]
path = "../fuzz/derive/accounts"
version = "0.10.0"

[dependencies.trident-derive-remaining-accounts]
path = "../fuzz/derive/remaining_accounts"
version = "0.10.0"

[dependencies.trident-derive-transaction-selector]
path = "../fuzz/derive/transaction_selector"
version = "0.10.0"

[dependencies.trident-derive-flow-executor]
path = "../fuzz/derive/flow_executor"
version = "0.10.0"

# Config (Trident.toml)
[dependencies.trident-config]
path = "../config"
version = "0.10.0"


# Trident-SVM
[dependencies.trident-svm]
version = "0.0.3"
git = "https://github.com/Ackee-Blockchain/trident-svm"
branch = "master"

[dependencies]
arbitrary = { workspace = true }
solana-sdk = { workspace = true }
thiserror = { workspace = true }
prettytable = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
tokio = { workspace = true }
anyhow = { workspace = true }
fehler = { workspace = true }
toml = { workspace = true }
rand = { workspace = true }
bincode = { workspace = true }
byteorder = { workspace = true }
base64 = { workspace = true }
itertools = { workspace = true }
borsh = { workspace = true }
shared_memory = { workspace = true }
signal-hook = { workspace = true }

solana-vote-program = { workspace = true, optional = true }
solana-stake-program = { workspace = true, optional = true }
spl-token = { workspace = true, optional = true, features = ["no-entrypoint"] }

honggfuzz = { workspace = true }
afl = { workspace = true }